<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>lib.utils.walk | lib-js | CARFAX</title>
    <link rel="stylesheet" href="../css/wharf.min.css">
    <link rel="stylesheet" href="../css/wharf.src.min.css">
    <script src="../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
</head>
<body>
    <h1>lib.utils.walk - Source</h1>
    
    <article>
        
        <pre><code class="javascript">var fs = require('fs'),
    path = require('path');

module.exports = function walk(dir, absolute) {
    if(absolute === undefined) absolute = true;

    var paths = !fs.existsSync(dir) ? [] : fs.readdirSync(dir)
        .map(function(pathString) {
            return path.join(dir, pathString);
        });

    var dirs = paths
        .filter(function(pathString) {
            return fs.lstatSync(pathString).isDirectory()
        })
        .map(function(pathString) {
            return walk(pathString);
        })
        .reduce(function(array, files) {
            return array.concat(files);
        }, [])
        .map(function(filename) {
            return absolute ? filename : filename.replace(dir, '');
        });

    var files = paths.filter(function(pathString) {
        return !fs.lstatSync(pathString).isDirectory()
    });

    return files.concat(dirs);
};</code></pre>
        
    </article>
</body>
</html>