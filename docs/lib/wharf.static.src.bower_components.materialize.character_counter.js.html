<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>wharf.static.src.bower_components.materialize.character_counter.js | wharf | CARFAX</title>
    <link rel="stylesheet" href="../css/wharf.min.css">
    <link rel="stylesheet" href="../css/wharf.src.min.css">
    <script src="../js/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
</head>
<body>
    <h1>wharf.static.src.bower_components.materialize.character_counter.js - Source</h1>
    
    <article>
        
        <pre><code class="javascript">(function ($) {

  $.fn.characterCounter = function(){
    return this.each(function(){

      itHasLengthAttribute = $(this).attr('length') != undefined;

      if(itHasLengthAttribute){
        $(this).on('input', updateCounter);
        $(this).on('focus', updateCounter);
        $(this).on('blur', removeCounterElement);

        addCounterElement($(this));
      }

    });
  };

  function updateCounter(){
    var maxLength     = +$(this).attr('length'),
    actualLength      = +$(this).val().length,
    isValidLength     = actualLength <= maxLength;

    $(this).parent().find('span[class="character-counter"]')
                    .html( actualLength + '/' + maxLength);

    addInputStyle(isValidLength, $(this));
  }

  function addCounterElement($input){
    $counterElement = $('<span/>')
                        .addClass('character-counter')
                        .css('float','right')
                        .css('font-size','12px')
                        .css('height', 1);

    $input.parent().append($counterElement);
  }

  function removeCounterElement(){
    $(this).parent().find('span[class="character-counter"]').html('');
  }

  function addInputStyle(isValidLength, $input){
    inputHasInvalidClass = $input.hasClass('invalid');
    if (isValidLength && inputHasInvalidClass) {
      $input.removeClass('invalid');
    }
    else if(!isValidLength && !inputHasInvalidClass){
      $input.removeClass('valid');
      $input.addClass('invalid');
    }
  }

  $(document).ready(function(){
    $('input, textarea').characterCounter();
  });

}( jQuery ));
</code></pre>
        
    </article>
</body>
</html>